<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mitch’s Auto Services – Check My Reg</title>
<meta name="description" content="Mobile mechanic in Stockton-on-Tees (+15 miles radius). Check your car by number plate using official DVLA data, then choose a service and request a quote via Email or WhatsApp.">
<style>
  :root{
    --brand:#F06407;
    --accent:#4A4443;
    --ink:#EDEDED;
    --bg:#0b0e13;
    --card:#121720;
    --muted:#9aa1ac;
    --line:#223046;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#101623);color:var(--ink);font-family:system-ui, Inter, Arial, sans-serif}
  a{color:#ffd6bf;text-decoration:none}
  .wrap{max-width:1040px;margin:0 auto;padding:20px 16px 40px}
  header{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:18px}
  .brand{display:flex;align-items:center;gap:12px}
  .brand h1{font-size:20px;margin:0;letter-spacing:.3px;color:var(--brand)}
  .badge{background:rgba(240,100,7,.15);color:#ffd9c5;border:1px dashed var(--brand);padding:6px 10px;border-radius:999px;font-size:12px;white-space:nowrap}
  .hero{display:grid;gap:16px;grid-template-columns:1fr}
  @media(min-width:900px){ .hero{grid-template-columns:1.1fr .9fr} }
  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px}
  .title{font-size:clamp(22px,3.2vw,34px);margin:0 0 6px}
  .lead{color:var(--muted);margin:0 0 12px}
  .muted{color:var(--muted)}
  .fine{font-size:12px;color:#8a93a3}
  label{display:block;font-weight:700;margin:6px 0}
  input,select,button{padding:12px;border-radius:10px;border:1px solid #2a3546;background:#0d121a;color:var(--ink);font-size:16px}
  input:focus,select:focus{outline:2px solid var(--brand)}
  button{cursor:pointer;background:var(--brand);color:#111;font-weight:800;border:none}
  button[disabled]{opacity:.6;cursor:not-allowed}
  .plate{display:flex;gap:10px;align-items:center;background:#161b25;border:1px solid #2a3546;padding:10px;border-radius:12px}
  .plate::before{content:"GB";font-weight:800;background:#1b3ea5;color:#fff;border-radius:6px;padding:6px 8px}
  .stack{display:grid;gap:12px}
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid #314056;border-radius:12px;background:#0e141d;cursor:pointer}
  .chip input{accent-color:var(--brand)}
  .skeleton{height:16px;background:#18202b;border-radius:6px;animation:pulse 1.2s infinite}
  @keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
  .list{margin:8px 0 0 18px}
  .kv{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .tag{font-size:12px;border:1px solid var(--line);color:var(--muted);padding:6px 8px;border-radius:999px}
  footer{margin-top:18px;color:var(--muted);font-size:14px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <h1>Mitch’s Auto Services</h1>
    </div>
    <div class="badge">Mobile mechanic • Stockton-on-Tees +15 miles</div>
  </header>

  <section class="hero">
    <div class="card">
      <h2 class="title">Check your number plate & request a quote</h2>
      <p class="lead">We use <strong>official DVLA data</strong> to identify your exact vehicle. Choose a service and get a quote by <strong>Email</strong> or <strong>WhatsApp</strong>. Parts are matched to your reg.</p>

      <div class="stack">
        <!-- STEP 1 -->
        <form id="vrmForm" novalidate>
          <label for="vrm">Step 1 — Enter registration</label>
          <div class="plate">
            <input id="vrm" placeholder="e.g. AB12 CDE" maxlength="8" autocomplete="off" required />
            <button id="lookupBtn" type="submit">Look up</button>
          </div>
          <small class="fine">Tip: remove spaces if it doesn’t find it first time.</small>
        </form>

        <div id="vehicleCard" style="display:none">
          <div id="vehTitle"><div class="skeleton" style="width:240px;height:18px"></div></div>
          <div id="vehMeta" class="muted" style="margin-top:4px"><div class="skeleton" style="width:300px;height:16px"></div></div>
          <div id="vehReg" class="muted" style="margin-top:2px"></div>
        </div>
        <div id="error" style="margin-top:6px;color:#ff9c9c;display:none"></div>

        <!-- STEP 2 -->
        <div id="step2" style="display:none">
          <label>Step 2 — What do you need?</label>
          <div id="serviceChips" class="chips"></div>
        </div>

        <!-- STEP 3 -->
        <div id="step3" style="display:none">
          <label>Step 3 — A quick detail</label>
          <div id="clarifierChips" class="chips"></div>

          <div id="pricing" class="muted" style="margin-top:6px">
            We’ll match parts to your reg and send a fixed quote.
          </div>

          <div style="margin-top:10px">
            <label for="warr">Warranty options</label>
            <select id="warr">
              <option value="0">6 months (included)</option>
              <option value="20">12 months (+£20)</option>
              <option value="40">18 months (+£40)</option>
            </select>
            <div class="fine">Full details in our <a href="https://mitchsautoservices.com/page/terms-and-conditions" target="_blank" rel="noopener">Terms & Conditions</a>.</div>
          </div>

          <div class="kv">
            <button id="emailBtn" type="button">Get Quote by Email</button>
            <button id="waBtn" type="button">Get Quote by WhatsApp</button>
            <a class="tag" href="https://mitchsautoservices.com/page/services" target="_blank" rel="noopener">View full service list</a>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: Contact + trust -->
    <aside class="card">
      <label>Book or ask a question</label>
      <div class="kv">
        <a href="tel:+447926725369"><button type="button">Call 07926 725369</button></a>
        <a href="mailto:support@mitchsautoservices.co.uk?subject=Service%20enquiry"><button type="button">Email us</button></a>
      </div>
      <p class="muted" style="margin-top:10px">Mondat–Friday • Mobile call-outs across Stockton-on-Tees and nearby towns (15-mile radius).</p>
      <ul class="list muted">
        <li>Transparent labour; parts priced to your registration</li>
        <li>Standard <strong>6-month labour warranty</strong> (upgrade available)</li>
        <li>Upfront quotes — no surprises</li>
        <li>we come to you, and with our loyalty program you could be in for a free service of your choice.</li>
      </ul>
      <p class="muted" style="margin-top:10px">Read our <a href="https://mitchsautoservices.com/page/terms-and-conditions" target="_blank" rel="noopener">Terms & Conditions</a>.</p>
    </aside>
  </section>

  <footer>
    <span>© Mitch’s Auto Services — Powered by DVLA Vehicle Enquiry</span>
    <span>Contact: support@mitchsautoservices.co.uk</span>
  </footer>
</div>

<script>
/* CONFIG */
const API_URL = '/api/vrm'; 
const SERVICES = [
  { id:'ac_recharge',  label:'Air Conditioning Top-Up/Recharge' },
  { id:'air_filter',   label:'Air Filter Change' },
  { id:'basic_service',label:'Basic Service Package' },
  { id:'battery_replacement', label:'Battery Replacement' },
  { id:'brake_change', label:'Brake Change' },
  { id:'brake_fluid',  label:'Brake Fluid Change' },
  { id:'car_refresh',  label:'Car Refresh Service Package' },
  { id:'coolant_change', label:'Coolant Change' },
  { id:'pollen_filter',label:'Dust/Pollen Filter Change' },
  { id:'oil_filter',   label:'Engine Oil and Filter Change' },
  { id:'fuel_filter',  label:'Fuel Filter Change' },
  { id:'lights',       label:'Headlights/Rear Lights Replacement' },
  { id:'major_service',label:'Major Service Package' },
  { id:'minor_service',label:'Minor Service Package' },
  { id:'premium_service', label:'Premium Service Package' },
  { id:'seasonal',     label:'Seasonal Maintenance Package' },
  { id:'tyre_check',   label:'Tyre Health Check' },
  { id:'wiper_motor',  label:'Window wiper motor replacement' }
];
const CLARIFIERS = {
  ac_recharge:['Not blowing cold','After winter recharge','Strange smell','Not sure'],
  air_filter:['Scheduled service','Reduced performance','Not sure'],
  basic_service:['Annual service','High mileage','Not sure'],
  battery_replacement:['Slow crank','Dash lights only','Totally dead','Not sure'],
  brake_change:['Front','Rear','Grinding/Noise','Pulling to one side','Not sure'],
  brake_fluid:['Scheduled change','Spongy pedal','ABS work done','Not sure'],
  car_refresh:['Full refresh','Selling car','Just bought car','Not sure'],
  coolant_change:['Scheduled change','Overheating','Leaking','Not sure'],
  pollen_filter:['Smelly air','Low airflow','Hayfever relief','Not sure'],
  oil_filter:['Service due','Oil light on','Leak','Not sure'],
  fuel_filter:['Hard starting','Power loss','Service due','Not sure'],
  lights:['Headlight bulb','Rear light','Indicator','Not sure'],
  major_service:['Major interval','High mileage','Not sure'],
  minor_service:['Minor interval','Not sure'],
  premium_service:['Full works','Not sure'],
  seasonal:['Winter prep','Summer trip','Not sure'],
  tyre_check:['Uneven wear','Vibration','Slow puncture','Not sure'],
  wiper_motor:['Stopped working','Slow movement','Intermittent','Not sure']
};
/* WIRING */
const $=id=>document.getElementById(id);
const vrmInput=$('vrm'),lookupBtn=$('lookupBtn'),vehicleCard=$('vehicleCard'),
      vehTitle=$('vehTitle'),vehMeta=$('vehMeta'),vehReg=$('vehReg'),
      errorBox=$('error'),step2=$('step2'),step3=$('step3'),
      serviceChips=$('serviceChips'),clarifierChips=$('clarifierChips'),
      pricing=$('pricing'),warrSel=$('warr');
let lastVRM='',chosenService=null,chosenClarifier=null;
function normaliseVRM(v){return(v||'').toUpperCase().replace(/\s+/g,'').replace(/[^A-Z0-9]/g,'');}
function renderServiceChips(list){serviceChips.innerHTML=list.map(s=>`<label class="chip"><input type="radio" name="srv" value="${s.id}"><span>${s.label}</span></label>`).join('');}
function renderClarifiers(serviceId){const opts=CLARIFIERS[serviceId]||['Not sure'];clarifierChips.innerHTML=opts.map(txt=>`<label class="chip"><input type="radio" name="clar" value="${txt}"><span>${txt}</span></label>`).join('');}
$('vrmForm').addEventListener('submit',async e=>{e.preventDefault();errorBox.style.display='none';const vrm=normaliseVRM(vrmInput.value);if(vrm.length<5){errorBox.textContent='Please enter a valid UK registration.';errorBox.style.display='block';return;}lookupBtn.disabled=true;lookupBtn.textContent='Looking…';vehicleCard.style.display='block';vehTitle.innerHTML='<div class="skeleton" style="width:240px;height:18px"></div>';vehMeta.innerHTML='<div class="skeleton" style="width:300px;height:16px"></div>';vehReg.textContent='';try{const res=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({vrm})});const data=await res.json();if(!res.ok)throw new Error(data?.message||data?.error||'Lookup failed');lastVRM=vrm;const engine=data.engineCapacity?(data.engineCapacity/1000).toFixed(1)+'L':'';vehTitle.innerHTML=`<strong>${data.make||''} ${data.model||''}</strong>`;vehMeta.innerHTML=[data.fuelType,engine,data.colour].filter(Boolean).join(' • ')||'<span class="muted">Details unavailable</span>';vehReg.textContent='Reg: '+vrm;renderServiceChips(SERVICES);step2.style.display='block';step3.style.display='none';pricing.textContent='Pick a service to continue.';}catch(err){errorBox.textContent=err.message.includes('Forbidden')?'DVLA says “Forbidden”: your server is not sending a valid API key yet.':err.message;errorBox.style.display='block';vehicleCard.style.display='none';}finally{lookupBtn.disabled=false;lookupBtn.textContent='Look up';}});
serviceChips.addEventListener('change',e=>{if(e.target.name!=='srv')return;const id=e.target.value;chosenService=SERVICES.find(s=>s.id===id);renderClarifiers(id);pricing.textContent='We’ll match parts to your reg and send a fixed quote.';step3.style.display='block';});
clarifierChips.addEventListener('change',e=>{if(e.target.name!=='clar')return;chosenClarifier=e.target.value;});
function msg(){const serviceName=chosenService?chosenService.label:'';const warranty=`£${Number(warrSel.value)||0}`;return`VRM: ${lastVRM}%0AService: ${encodeURIComponent(serviceName)}%0ADetail: ${encodeURIComponent(chosenClarifier||'')}%0AWarranty upgrade: ${encodeURIComponent(warranty)}`;}
document.getElementById('emailBtn').addEventListener('click',()=>{if(!lastVRM||!chosenService){alert('Please enter your reg and select a service.');return;}window.location=`mailto:support@mitchsautoservices.co.uk?subject=Quote%20${encodeURIComponent(lastVRM)}&body=${msg()}`;});
document.getElementById('waBtn').addEventListener('click',()=>{if(!lastVRM||!chosenService){alert('Please enter your reg and select a service.');return;}window.open(`https://wa.me/447926725369?text=${msg()}`,'_blank');});
</script>
</body>
</html>
